{% extends "base.html" %}

{% block stylesheets %}
{% load static %}
<link rel="stylesheet" href={% static 'basicforms.css' %} />

<style>
    form {
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
    }
    /* Since there is only one style in this document, this is defined here */
    input[type="number"]{
        height:50px;
        width:80px;
        text-align:center;
        font-size:x-large;
        font-weight:bold;
        justify-self:center;
    }
</style>
{% endblock %}

{% block content %}

<div class="container-bordered">
    <h1>Register a visit for your team</h1>
    <a href="/account">Back to Account</a>

    <form method="post">
        {% csrf_token %}
        {% for field in form.visible_fields %}
        {{field.label}}
        <br />
        {{field}}
        {{field.help_text}}
        {{field.errors}}
        <br />
        {% endfor %}
        <input type="submit" value="Continue" />
    </form>
</div>

{% endblock %}

{% block scripts %}
<script>
    // since there are only a few functions to this page, all
    // are defined here
    function validIndicator() {
        // retrieve the input of type number by the ID generated by Django
        let numberInput = document.getElementById("{{form.visible_fields.0.auto_id}}")
        // safety check if number input is actually present
        if (numberInput == null) {
            console.log("%c%s", "color:red", "ERROR: Could not get the numbered form input!");
            return false;
        }
        // the number should be in a valid range starting from 2 and is a number

        colorRedIfInvalid = () => {
            let value = parseInt(numberInput.value);
            if (Number.isNaN(value) || !(1 <= value)) {
                numberInput.style.backgroundColor = "darkred";
            }
            else {
                numberInput.style.backgroundColor = ""; // reset
            }
        };
        numberInput.oninput = colorRedIfInvalid;
        colorRedIfInvalid(); // also run this now to indicate invalid inputs 
        // (useful when the user submits an invalid form)

    }

    window.onload = validIndicator;
</script>
{% endblock %}